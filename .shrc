set -o emacs

umask 022

unalias -a

alias ali='. "$ENV"'
alias cd..="cd .."
alias cdup="cd .."
alias cls=clear
alias dir=ls
alias h="fc -l"
alias j=jobs
alias l='$PAGER'
alias lk="ls -l | grep ^d"
alias ll="ls -l"
alias r="fc -e -"

getcedict='curl -o "$HOME/tmp/cedict_1_0_ts_utf-8_mdbg.zip" https://www.mdbg.net/chinese/export/cedict/cedict_1_0_ts_utf-8_mdbg.zip && unzip "$HOME/tmp/cedict_1_0_ts_utf-8_mdbg.zip" -d "$HOME/tmp"'
alias getfortunes='curl -o "$HOME/tmp/fortunes" https://raw.githubusercontent.com/openbsd/src/master/games/fortune/datfiles/fortunes2 && grep '^%$' "$HOME/tmp/fortunes" | wc -l > "$HOME/tmp/fortunes.count"'
alias fixperms='chmod -R go-rwx "$HOME/.ssh" "$HOME/mail"'

cedict() {
	if [ ! -f "$HOME/tmp/cedict_ts.u8" ]
	then
		echo "Dictionary not found: getcedict first!" 1>&2
		return
	fi
	egrep "^[^ ]+ $1 " "$HOME/tmp/cedict_ts.u8" | cut -d\  -f2-
}

case "$SHELL" in
	*ksh*)
	;;
	*)
		if whereis -qb whereis > /dev/null 2>&1
		then
			alias whence="whereis -qb"
		fi
	;;
esac

case "`uname 2> /dev/null`" in
	MINGW*)
		alias dc="winpty dc"
		alias gradlew="winpty ./gradlew.bat"
		alias ifconfig="winpty ipconfig"
		alias node="winpty node"
		alias npm="winpty npm.cmd"
		alias ping="winpty ping"
		alias traceroute="winpty tracert"
	;;
	*)
	;;
esac

case "`hostname 2> /dev/null`" in
	sdf)
		alias git="git --exec-path=$HOME/pkg/git/libexec/git-core"
	;;
	*)
	;;
esac

